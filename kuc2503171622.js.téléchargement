!function(){"use strict";function e(e,t){let n=document.createElement("iframe");return n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight",0),n.setAttribute("marginwidth",0),n.setAttribute("TOPMARGIN",0),n.setAttribute("LEFTMARGIN",0),n.setAttribute("allowtransparency","true"),n.setAttribute("width",t),n.setAttribute("height",e),n}function t(e,t){let n=new XMLHttpRequest;n.addEventListener("load",(function(){t(n.responseText)})),n.open("GET",e),n.send()}function n(e,t,n,r){let a=e.document,i=a.createElement("script");i.type="text/javascript",n&&"function"==typeof n&&(i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,n())}:i.onload=function(){n()}),i.src=t;let o=a.getElementsByTagName("head");return o=o.length?o:a.getElementsByTagName("body"),o.length&&(o=o[0],o.insertBefore(i,o.firstChild)),i}function r(e){const t={hb_adid:"adId",hb_cache_host:"cacheHost",hb_cache_path:"cachePath",hb_cache_id:"uuid",hb_format:"mediaType",hb_env:"env",hb_size:"size",hb_pb:"hbPb"};function n(t){return!!(e[t]&&(n=e[t],a(n,"Object")&&Object.keys(e[t]).length>0||i(e[t])&&""!==e[t]));var n}let r={},o={};var s;return n("targetingMap")?o=function(e){let t={};return Object.keys(e).forEach((function(n){Array.isArray(e[n])&&e[n].length>0&&(t[n]=e[n][0])})),t}(e.targetingMap):n("targetingKeywords")&&(o=function(e){let t={};const n=e.split(",");return n.length>0&&n.forEach((function(e){let n=e.split(":");if(2===n.length){let e=n[0],r=n[1];t[e]=r}})),t}(e.targetingKeywords)),s=o,Object.keys(s).forEach((function(e){r[t[e]||e]=s[e]})),Object.keys(e).forEach((function(t){"targetingMap"!==t&&"targetingKeywords"!==t&&i(e[t])&&""!==e[t]&&(r[t]=e[t])})),r}function a(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function i(e){return a(e,"String")}function o(e,t=window){const n=(()=>{if(null==e)return null;const t=function(e){let t=document.createElement("a");return t.href=decodeURIComponent(e),{href:t.href,protocol:(t.protocol||"").replace(/:$/,""),hostname:t.hostname,port:+t.port,pathname:t.pathname.replace(/^(?!\/)/,"/"),hash:(t.hash||"").replace(/^#/,""),host:(t.host||window.location.host).replace(/:(443|80)$/,"")}}(e);return t.protocol+"://"+t.host})();return function(e,r){if(null==n)throw new Error("Missing pubUrl");let a;if(e=JSON.stringify(e),null==r)t.parent.postMessage(e,n);else{const o=new MessageChannel;a=o.port1,a.onmessage=r,t.addEventListener("message",i),t.parent.postMessage(e,n,[o.port2])}return function(){null!=a&&(t.removeEventListener("message",i),a.onmessage=null,a=null)};function i(e){(e.origin||e.originalEvent&&e.originalEvent.origin)===n&&r(e)}}}const s="pb-click",d="hb_native_asset_id";function c(e,t){t({message:"Prebid Native",action:"fireNativeImpressionTrackers",adId:e})}function l(e,t){const n={message:"Prebid Native",action:"click",adId:e},r=document.getElementsByClassName(s)||[];for(let e=0;e<r.length;e++)r[e].addEventListener("click",(e=>{let r=e.target,a=r&&r.getAttribute(d);n.assetId=a,t(n)}),!0)}function u(e){return!(!e.$sf||!e.$sf.ext)}const p={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url"},h={image:{1:"icon",3:"image"},data:{1:"sponsoredBy",2:"body",3:"rating",4:"likes",5:"downloads",6:"price",7:"salePrice",8:"phone",9:"address",10:"body2",11:"displayUrl",12:"cta"}},f="prebid.adnxs.com",m="/pbc/v1/cache",b="%%CLICK_URL_UNESC%%";let v="";function g(e,r,a=o){r.clickUrlUnesc&&r.clickUrlUnesc!==b&&(v=r.clickUrlUnesc);const{pubUrl:i}=r,s=a(i,e);let d,g,y,_=0;function k(){null!=y&&(y(),y=null)}function w(e){let t;try{t=JSON.parse(e)}catch(e){console.log(`Error parsing response from cache host: ${e}`)}return t}function A(n){let r=n.uuid;var a,i;t(`${a=n.cacheHost,i=n.cachePath,`https://${void 0===a||""===a?f:a}${void 0===i||""===i?m:i}`}?uuid=${r}`,(function(t){let n=w(t);if(n&&n.adm){let t=w(n.adm);if(t&&t.assets){let n=function(e){let t,n=[];return e.assets.forEach((e=>{e.img?h.image[e.img.type]?n.push({key:h.image[e.img.type],value:e.img.url}):console.log("ERROR: Invalid image type for image asset"):e.data?h.data[e.data.type]?n.push({key:h.data[e.data.type],value:e.data.value}):console.log("ERROR: Invalid data type for data asset"):e.title&&n.push({key:"title",value:e.title.text})})),e.link&&(e.link.clicktrackers&&(t=e.link.clicktrackers),n.push({key:"clickUrl",value:e.link.url})),{assets:n,clicktrackers:t,imptrackers:e.imptrackers,eventtrackers:e.eventtrackers}}(t);const r=O(e.document.body.innerHTML,n);e.document.body.innerHTML=r,d&&d({clickTrackers:n.clicktrackers,impTrackers:n.imptrackers,eventtrackers:n.eventtrackers})}}}))}function E(){return void 0!==e.pbNativeData}function N(e,t){return t&&!E()?`${e}:${t}`:E()?`##${e}##`:e}function U(e,...t){return Object.values(p).reduce(((n,r)=>{const a=N(r,e);for(const e of t.filter(Boolean))if(e.indexOf(a)>=0){n.push(r);break}return n}),[])}function T(t){return U(t,e.document.body.innerHTML,e.document.head.innerHTML)}function I(t){try{var r={};try{r=JSON.parse(t.data)}catch(e){if(_++>10)throw k(),e;return}if("assetResponse"===r.message){r.clickUrlUnesc=v;const t=e.document.body.innerHTML,i=e.document.head.innerHTML;if(E()&&r.adId!==e.pbNativeData.adId)return;a=d,d=()=>{c(r.adId,s),l(r.adId,s),a&&a()},i&&(e.document.head.innerHTML=O(i,r)),r.assets=r.assets||[];let o=r.assets;if(r.ortb&&(o.ortb=r.ortb),r.hasOwnProperty("rendererUrl")&&r.rendererUrl||E()&&e.pbNativeData.hasOwnProperty("rendererUrl"))if(e.renderAd){R(e.renderAd&&e.renderAd(o)||"",r)}else document.getElementById("pb-native-renderer")?document.getElementById("pb-native-renderer").addEventListener("load",(function(){R(e.renderAd&&e.renderAd(o)||"",r)})):n(e,E()&&e.pbNativeData.hasOwnProperty("rendererUrl")&&e.pbNativeData.rendererUrl||r.rendererUrl,(function(){R(e.renderAd&&e.renderAd(o)||"",r)}));else if(r.hasOwnProperty("adTemplate")&&r.adTemplate||E()&&e.pbNativeData.hasOwnProperty("adTemplate")){const t=E()&&e.pbNativeData.hasOwnProperty("adTemplate")&&e.pbNativeData.adTemplate||r.adTemplate;R(O(t,r),r)}else{const n=O(t,r);e.document.body.innerHTML=n,d&&d(),k()}}}catch(e){g&&g(e)}var a}function R(t,n){if(!u(window)){let t=function(e){let t,n=e;for(;n!==e.top;){if(t=n.parent,!t.frames||!t.frames.length)return null;for(let e=0;e<t.frames.length;e++)if(t.frames[e]===n){if(!t.document)return null;for(let e of t.document.getElementsByTagName("iframe")){if(!e.contentWindow)return null;if(e.contentWindow===n)return e.parentElement}}}}(e);if(t&&t.children&&t.children[0]){const n=t.children[0];if("1"===n.width&&"1"===n.height){let n=t.getBoundingClientRect().width;e.document.body.style.width=`${n}px`}}}t=t.replaceAll(b,n.clickUrlUnesc||""),e.document.body.innerHTML+=t,d&&d(),e.removeEventListener("message",I),k();const r=()=>{return e=n.adId,t=document.body.clientHeight||document.body.offsetHeight,r=document.body.clientWidth,void s({message:"Prebid Native",action:"resizeNativeHeight",adId:e,height:t,width:r});var e,t,r};"complete"===document.readyState?r():window.onload=r,"function"==typeof window.postRenderAd&&window.postRenderAd(n)}function O(e,{assets:t,ortb:n,adId:r}){if(n)e=function(e,t){return t.assets.forEach((t=>{e=e.replaceAll(`##hb_native_asset_id_${t.id}##`,(e=>e.img?e.img.url:e.data?e.data.value:e.title?e.title.text:e.video?e.video.vasttag:"")(t)),t.link&&t.link.url&&(e=e.replaceAll(`##hb_native_asset_link_id_${t.id}##`,t.link.url))})),e=e.replaceAll(/##hb_native_asset_id_\d+##/gm,""),t.privacy&&(e=e.replaceAll("##hb_native_privacy##",t.privacy)),t.link&&(e=e.replaceAll("##hb_native_linkurl##",t.link.url)),e}(e,n);else if(!Array.isArray(t))return e;return t=t||[],U(r,e).forEach((n=>{const a=N(n,r),i=new RegExp(a,"g"),o=t.find((e=>n===p[e.key]));e=e.replace(i,o?o.value:"")})),e}return{loadAssets:function(t,n,r){g=r;const a=T(t);E()&&e.pbNativeData.hasOwnProperty("assetsToReplace")&&e.pbNativeData.assetsToReplace.forEach((e=>{const t=e.match(/hb_native_/i)?e:p[e];t&&a.push(t)})),E()&&e.pbNativeData.hasOwnProperty("requestAllAssets")&&e.pbNativeData.requestAllAssets?(d=n,y=function(e){const t={message:"Prebid Native",action:"allAssetRequest",adId:e};return s(t,I)}(t)):a.length>0?(d=n,y=function(e,t){const n={message:"Prebid Native",action:"assetRequest",adId:e,assets:t};return s(n,I)}(t,a)):r&&r(new Error("No assets to load: no placeholders found in template"))},loadMobileAssets:function(e,t){T().length>0&&(d=t,A(e))}}}function y(t,n,r="",a){let i=t.location,s=r||t.location.hostname,d=i.protocol+"//"+s;const c=o(a,t);function l(r){let a=r.message?"message":"data",i={};try{i=JSON.parse(r[a])}catch(e){return}if(i.message&&"Prebid Response"===i.message&&i.adId===n)try{let r=t.document.body,a=i.ad,s=i.adUrl,d=i.width,c=i.height;if("video"===i.mediaType)o(!1,{reason:"preventWritingOnMainDocument",message:`Cannot render video ad ${n}`}),console.log("Error trying to write ad.");else if(a){const t=e(i.height,i.width);r.appendChild(t),t.contentDocument.open(),t.contentDocument.write(a),t.contentDocument.close(),o(!0)}else if(s){const t=e(c,d);t.style.display="inline",t.style.overflow="hidden",t.src=s,function(e,t,n){let r;r=(t=t||document).getElementsByTagName(n);try{r=r.length?r:t.getElementsByTagName("body"),r.length&&(r=r[0],r.insertBefore(e,r.firstChild))}catch(e){}}(t,document,"body"),o(!0)}else o(!1,{reason:"noAd",message:`No ad for ${n}`}),console.log(`Error trying to write ad. No ad markup or adUrl for ${n}`)}catch(e){o(!1,{reason:"exception",message:e.message}),console.log("Error in rendering ad",e)}function o(e,{reason:t,message:r}={}){const a={message:"Prebid Event",adId:n,event:e?"adRenderSucceeded":"adRenderFailed"};e||(a.info={reason:t,message:r}),c(a)}}c({message:"Prebid Request",adId:n,adServerDomain:d},l)}const _={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url"},k={image:{1:"icon",3:"image"},data:{1:"sponsoredBy",2:"body",3:"rating",4:"likes",5:"downloads",6:"price",7:"salePrice",8:"phone",9:"address",10:"body2",11:"displayUrl",12:"cta"}},w="%%CLICK_URL_UNESC%%";let A="";function E(e,r,a=o){r.clickUrlUnesc&&r.clickUrlUnesc!==w&&(A=r.clickUrlUnesc);const{pubUrl:i}=r,s=a(i,e);let d,p,h,f=0;function m(){null!=h&&(h(),h=null)}function b(e){let t;try{t=JSON.parse(e)}catch(e){console.log(`Error parsing response from cache host: ${e}`)}return t}function v(n){let r=n.uuid;var a,i;t(`${a=n.cacheHost,i=n.cachePath,`https://${void 0===a||""===a?"prebid.adnxs.com":a}${void 0===i||""===i?"/pbc/v1/cache":i}`}?uuid=${r}`,(function(t){let n=b(t);if(n&&n.adm){let t=b(n.adm);if(t&&t.assets){let n=function(e){let t,n=[];return e.assets.forEach((e=>{e.img?k.image[e.img.type]?n.push({key:k.image[e.img.type],value:e.img.url}):console.log("ERROR: Invalid image type for image asset"):e.data?k.data[e.data.type]?n.push({key:k.data[e.data.type],value:e.data.value}):console.log("ERROR: Invalid data type for data asset"):e.title&&n.push({key:"title",value:e.title.text})})),e.link&&(e.link.clicktrackers&&(t=e.link.clicktrackers),n.push({key:"clickUrl",value:e.link.url})),{assets:n,clicktrackers:t,imptrackers:e.imptrackers,eventtrackers:e.eventtrackers}}(t);const r=I(e.document.body.innerHTML,n);e.document.body.innerHTML=r,d&&d({clickTrackers:n.clicktrackers,impTrackers:n.imptrackers,eventtrackers:n.eventtrackers})}}}))}function g(){return void 0!==e.pbNativeData}function y(e,t){return t&&!g()?`${e}:${t}`:g()?`##${e}##`:e}function E(e,...t){return Object.values(_).reduce(((n,r)=>{const a=y(r,e);for(const e of t.filter(Boolean))if(e.indexOf(a)>=0){n.push(r);break}return n}),[])}function N(t){return E(t,e.document.body.innerHTML,e.document.head.innerHTML)}function U(t){try{var r={};try{r=JSON.parse(t.data)}catch(e){if(f++>10)throw m(),e;return}if("assetResponse"===r.message){r.clickUrlUnesc=A;const t=e.document.body.innerHTML,i=e.document.head.innerHTML;if(g()&&r.adId!==e.pbNativeData.adId)return;a=d,d=()=>{c(r.adId,s),l(r.adId,s),a&&a()},i&&(e.document.head.innerHTML=I(i,r)),r.assets=r.assets||[];let o=r.assets;if(r.ortb&&(o.ortb=r.ortb),r.hasOwnProperty("rendererUrl")&&r.rendererUrl||g()&&e.pbNativeData.hasOwnProperty("rendererUrl"))if(e.renderAd){T(e.renderAd&&e.renderAd(o)||"",r)}else document.getElementById("pb-native-renderer")?document.getElementById("pb-native-renderer").addEventListener("load",(function(){T(e.renderAd&&e.renderAd(o)||"",r)})):n(e,g()&&e.pbNativeData.hasOwnProperty("rendererUrl")&&e.pbNativeData.rendererUrl||r.rendererUrl,(function(){T(e.renderAd&&e.renderAd(o)||"",r)}));else if(r.hasOwnProperty("adTemplate")&&r.adTemplate||g()&&e.pbNativeData.hasOwnProperty("adTemplate")){const t=g()&&e.pbNativeData.hasOwnProperty("adTemplate")&&e.pbNativeData.adTemplate||r.adTemplate;T(I(t,r),r)}else{const n=I(t,r);e.document.body.innerHTML=n,d&&d(),m()}}}catch(e){p&&p(e)}var a}function T(t,n){if(!u(window)){let t=function(e){let t,n=e;for(;n!==e.top;){if(t=n.parent,!t.frames||!t.frames.length)return null;for(let e=0;e<t.frames.length;e++)if(t.frames[e]===n){if(!t.document)return null;for(let e of t.document.getElementsByTagName("iframe")){if(!e.contentWindow)return null;if(e.contentWindow===n)return e.parentElement}}}}(e);if(t&&t.children&&t.children[0]){const n=t.children[0];if("3"===n.width&&"1"===n.height){let n=t.getBoundingClientRect().width;e.document.body.style.width=`${n}px`}}}t=t.replaceAll(w,n.clickUrlUnesc||""),e.document.body.innerHTML+=t,d&&d(),e.removeEventListener("message",U),m();const r=()=>{return e=n.adId,t=document.body.offsetHeight,r=document.body.scrollWidth,void s({message:"Prebid Native",action:"resizeNativeHeight",adId:e,height:t,width:r});var e,t,r};"complete"===document.readyState?r():window.onload=r,"function"==typeof window.postRenderAd&&window.postRenderAd(n)}function I(e,{assets:t,ortb:n,adId:r}){if(n)e=function(e,t){return t.assets.forEach((t=>{e=e.replaceAll(`##hb_native_asset_id_${t.id}##`,(e=>e.img?e.img.url:e.data?e.data.value:e.title?e.title.text:e.video?e.video.vasttag:"")(t)),t.link&&t.link.url&&(e=e.replaceAll(`##hb_native_asset_link_id_${t.id}##`,t.link.url))})),e=e.replaceAll(/##hb_native_asset_id_\d+##/gm,""),t.privacy&&(e=e.replaceAll("##hb_native_privacy##",t.privacy)),t.link&&(e=e.replaceAll("##hb_native_linkurl##",t.link.url)),e}(e,n);else if(!Array.isArray(t))return e;return t=t||[],E(r,e).forEach((n=>{const a=y(n,r),i=new RegExp(a,"g"),o=t.find((e=>n===_[e.key]));e=e.replace(i,o?o.value:"")})),e}return{loadAssets:function(t,n,r){p=r;const a=N(t);g()&&e.pbNativeData.hasOwnProperty("assetsToReplace")&&e.pbNativeData.assetsToReplace.forEach((e=>{const t=e.match(/hb_native_/i)?e:_[e];t&&a.push(t)})),g()&&e.pbNativeData.hasOwnProperty("requestAllAssets")&&e.pbNativeData.requestAllAssets?(d=n,h=function(e){const t={message:"Prebid Native",action:"allAssetRequest",adId:e};return s(t,U)}(t)):a.length>0?(d=n,h=function(e,t){const n={message:"Prebid Native",action:"assetRequest",adId:e,assets:t};return s(n,U)}(t,a)):r&&r(new Error("No assets to load: no placeholders found in template"))},loadMobileAssets:function(e,t){N().length>0&&(d=t,v(e))}}}window.kleanadsRenderAd=(e,t)=>{switch(t?.bidMediatype){case"native":{const n=function(e,t=o,n=g){let r;return{renderNativeAd:function(a,i){function o(e,t,n){r({message:"Prebid Event",adId:e,event:t?"adRenderSucceeded":"adRenderFailed",info:n})}window.pbNativeData=i,r=t(i.pubUrl,e);try{const e=n(window,i);if(null!=i.adId){if(i.hasOwnProperty("rendererUrl")&&!i.rendererUrl.match(/##.*##/i)){const e=a.createElement("SCRIPT");e.src=i.rendererUrl,e.id="pb-native-renderer",a.body.appendChild(e)}e.loadAssets(i.adId,(()=>{o(i.adId,!0)}),(e=>{o(i.adId,!1,{reason:"exception",message:e.message})}))}else o(null,!1,{reason:"missingDocOrAdid"}),console.warn("Prebid Native Tag object was missing 'adId'.")}catch(e){o(i&&i.adId,!1,{reason:"exception",message:e.message}),console.error("Error rendering ad",e)}}}}(window,o,E);t.requestAllAssets=!0,n.renderNativeAd(e,t);break}default:!function(e,t){const n=r(t);y(window,n.adId,n.adServerDomain,n.pubUrl)}(0,t)}}}();
